{
  "stats": {
    "suites": 1,
    "tests": 7,
    "passes": 7,
    "pending": 0,
    "failures": 0,
    "start": "2024-12-15T03:58:35.027Z",
    "end": "2024-12-15T04:02:05.476Z",
    "duration": 210449,
    "testsRegistered": 7,
    "passPercent": 100,
    "pendingPercent": 0,
    "other": 0,
    "hasOther": false,
    "skipped": 0,
    "hasSkipped": false
  },
  "results": [
    {
      "uuid": "6e94fde8-b257-452b-979f-800830272ebb",
      "title": "",
      "fullFile": "cypress/e2e/test-suites/ECP-T3545-ChangePriority.spec.ts",
      "file": "cypress/test-suites/ECP-T3545-ChangePriority.spec.ts",
      "beforeHooks": [],
      "afterHooks": [],
      "tests": [],
      "suites": [
        {
          "uuid": "c71aebb3-0b36-496d-85b5-0430742e43ac",
          "title": "ECP-T3545-Change Reading Priority",
          "fullFile": "",
          "file": "",
          "beforeHooks": [],
          "afterHooks": [],
          "tests": [
            {
              "title": "ECP-T3545 - data prep",
              "fullTitle": "ECP-T3545-Change Reading Priority ECP-T3545 - data prep",
              "timedOut": null,
              "duration": 76282,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "common_1.Common.login(customerName, userName, userpassword);\ncommon_1.Common.switchToCustomer(customerName, configFile.timeout, true);\ncommon_1.Common.switchToFacility(facilityName);\ncy.reload();\ncommon_1.Common.navigateTo(\"Sharing List\");\ncy.waitUntil(function () { return cy.get(\".pageTitle\").should(\"be.visible\"); }, {\n    timeout: configFile.hugeTimeout,\n});\ncommon_1.Common.createAPIToken(\"api_token_for_org_\".concat(facilityName))\n    .then(function (res) {\n    token = res.token;\n    orgId = res.orgId;\n    console.log(\"token: \", token, \" , orgId: \", orgId);\n    //Upload a-01 study from resources folder\n    var examUploadCmd = \"node utils/p10UploadDriver.js -baseUri=\".concat(configFile.url, \" -apiToken=\").concat(token, \" -maxParallel=5 -data=\").concat(\"resources/a-01\", \" -keepAlive=1\");\n    cy.exec(examUploadCmd, {\n        log: true,\n        env: {\n            NODE_TLS_REJECT_UNAUTHORIZED: configFile.NODE_TLS_REJECT_UNAUTHORIZED,\n        },\n        timeout: configFile.hugeTimeout,\n    }).then(function (_a) {\n        var code = _a.code, stdout = _a.stdout, stderr = _a.stderr;\n        console.log(code, stdout, stderr);\n    });\n    cy.wait(configFile.smallTimeout);\n})\n    .catch(function (err) {\n    console.log(err);\n});",
              "err": {},
              "uuid": "5f281b61-9763-407e-9a3f-5da3101ed065",
              "parentUUID": "c71aebb3-0b36-496d-85b5-0430742e43ac",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Steps 1-3 login, change priority and save",
              "fullTitle": "ECP-T3545-Change Reading Priority Steps 1-3 login, change priority and save",
              "timedOut": null,
              "duration": 22611,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "common_1.Common.login(customerName, adminUser, adminPassword);\ncy.wait(configFile.smallTimeout);\ncy.get(\"body\").then(function (elx) {\n    if (elx.find(\".agreement\").length > 0) {\n        cy.wrap(meteor_1.Meteor.acceptTermWS(adminUser, adminPassword));\n        cy.reload();\n    }\n});\ncommon_1.Common.navigateTo('Worklist');\ncy.get('[data-cy=\"filterViewItem-All Unread\"]').first().then(function (el) {\n    cy.get('[data-cy=\"filterViewItem-All Unread\"]').first().click();\n    if (!el.find(\".fa-star\").length) {\n        cy.get('[data-cy=\"filterViewItem-All Unread\"]').first().rightclick();\n        cy.get('[data-cy=\"Set as Default\"]').click();\n    }\n});\nworklist_common_1.Worklist.filterByFacility(facilityName);\ncy.get('[data-cy=\"patientName-cell\"]').first().rightclick();\ncy.get('[data-cy=\"hipaaLog\"]', { timeout: configFile.hugeTimeout, }).click();\nvar countHippaLogRows;\ncy.get('.rt-body-hipaa-logs-list').then(function ($div) {\n    countHippaLogRows = $div.find(\".rt-tr-group\").length;\n});\ncy.get('.hipaa-log-title span:contains(\"×\")').first().click();\n// Step 2 change priority\nchangePriority();\n// Step 3 save the new priority\ncy.get('button:contains(\"Change Priority\")').click();\ncy.get('[data-cy=\"mappedPriorityCell\"]').first().should('contain', 'STAT');\n// Changes were saved to Audit log\ncy.get('[data-cy=\"patientName-cell\"]').first().rightclick();\ncy.get('[data-cy=\"hipaaLog\"]', { timeout: configFile.hugeTimeout, }).click();\ncy.get('.rt-body-hipaa-logs-list').then(function ($div) {\n    var currentCountHippaLogRows = $div.find(\".rt-tr-group\").length;\n    expect(currentCountHippaLogRows).to.be.equal(countHippaLogRows + 1);\n});\nvar firstHippaLogRow = cy.get('.rt-body-hipaa-logs-list .rt-tr-group:first-child');\ncy.wait(configFile.smallTimeout);\nfirstHippaLogRow.get('.hipaa-event-detail-button').should('contain', 'Change Priority');\nvar user = adminUser.split(\"@\")[0];\nfirstHippaLogRow.get(\".rt-body-hipaa-logs-list .rt-td.ellipsis\").eq(2).should('contain', \"\".concat(user, \", \").concat(user));",
              "err": {},
              "uuid": "be5d26a9-f74b-43f8-acaf-f767a1d6a441",
              "parentUUID": "c71aebb3-0b36-496d-85b5-0430742e43ac",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 4 check cancel button functionality",
              "fullTitle": "ECP-T3545-Change Reading Priority Step 4 check cancel button functionality",
              "timedOut": null,
              "duration": 14048,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "common_1.Common.login(customerName, adminUser, adminPassword);\ncommon_1.Common.navigateTo('Worklist');\nworklist_common_1.Worklist.filterByFacility(facilityName);\ncy.get('[data-cy=\"patientName-cell\"]').first().rightclick();\ncy.get('[data-cy=\"hipaaLog\"]', { timeout: configFile.hugeTimeout, }).click();\nvar countHippaLogRows;\ncy.get('.rt-body-hipaa-logs-list').then(function ($div) {\n    countHippaLogRows = $div.find(\".rt-tr-group\").length;\n});\ncy.get('.hipaa-log-title span:contains(\"×\")').first().click();\nvar prevPriority = '';\ncy.get('[data-cy=\"mappedPriorityCell\"]').first().should(function ($span) {\n    prevPriority = $span.text();\n});\nchangePriority();\n// Cancel the changes\ncy.get('button:contains(\"Cancel\")').click();\n// Should stay with the prev priority\ncy.get('[data-cy=\"mappedPriorityCell\"]').first().should(function ($span) {\n    var currentPriority = $span.text();\n    expect(currentPriority).be.equal(prevPriority);\n});\n//Should stay with the prev hippa log\ncy.get('[data-cy=\"patientName-cell\"]').first().rightclick();\ncy.get('[data-cy=\"hipaaLog\"]', { timeout: configFile.hugeTimeout, }).click();\ncy.get('.rt-body-hipaa-logs-list').then(function ($div) {\n    var currentCountHippaLogRows = $div.find(\".rt-tr-group\").length;\n    expect(currentCountHippaLogRows).to.be.equal(countHippaLogRows);\n});",
              "err": {},
              "uuid": "e296de0d-9111-4610-8323-16d99c401c30",
              "parentUUID": "c71aebb3-0b36-496d-85b5-0430742e43ac",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Steps 6-7 change priority for several items",
              "fullTitle": "ECP-T3545-Change Reading Priority Steps 6-7 change priority for several items",
              "timedOut": null,
              "duration": 42836,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "common_1.Common.login(customerName, adminUser, adminPassword);\ncommon_1.Common.navigateTo('Worklist');\n// Upload a-02 study from resources folder\nvar examUploadCmd1 = \"node utils/p10UploadDriver.js -baseUri=\".concat(configFile.url, \" -apiToken=\").concat(token, \" -maxParallel=5 -data=\").concat(\"resources/a-02\", \" -keepAlive=1\");\ncy.exec(examUploadCmd1, {\n    log: true,\n    env: {\n        NODE_TLS_REJECT_UNAUTHORIZED: configFile.NODE_TLS_REJECT_UNAUTHORIZED,\n    },\n    timeout: configFile.hugeTimeout,\n}).then(function (_a) {\n    var code = _a.code, stdout = _a.stdout, stderr = _a.stderr;\n    console.log(code, stdout, stderr);\n});\ncy.wait(configFile.smallTimeout);\ncommon_1.Common.navigateTo('Worklist');\ncy.get('[data-cy=\"filterChip_readStatus\"]').find('[class=\"close\"]').click();\nworklist_common_1.Worklist.filterByFacility(facilityName);\ncy.get('.column-name.sortable[data-cy=\"mRNColumn\"]').click();\ncy.get('[data-cy=\"patientName-cell\"]').should('have.length.gte', 2, { timeout: configFile.longTimeout });\nvar prevHippaLogCount = [];\ncy.get('[role=\"rowgroup\"]').each(function ($el, index) {\n    cy.get('[data-cy=\"patientName-cell\"]').eq(index).rightclick();\n    cy.get('[data-cy=\"hipaaLog\"]', { timeout: configFile.hugeTimeout, }).click();\n    cy.get('.rt-body-hipaa-logs-list').first().then(function ($div) {\n        prevHippaLogCount[index] = $div.find(\".rt-tr-group\").length;\n        cy.get('.hipaa-log-title span:contains(\"×\")').first().click();\n    });\n});\n//Step 6 select serveral items, and change priority\ncy.get('[data-cy=\"selectionColumn\"] .nui-checkbox').eq(0).click();\nchangePriority();\n//Step 7 confirm the change\ncy.get('button:contains(\"Change Priority\")').click();\ncy.get('[role=\"rowgroup\"]').each(function ($el, index, $list) {\n    cy.get('[data-cy=\"mappedPriorityCell\"]').eq(index).should('contain', 'STAT');\n    // Changes were  saved to Audit log\n    cy.get('[data-cy=\"patientName-cell\"]').eq(index).rightclick();\n    cy.get('[data-cy=\"hipaaLog\"]', { timeout: configFile.hugeTimeout, }).first().click();\n    cy.get('.rt-body-hipaa-logs-list').then(function ($div) {\n        var currentHippaLogCount = $div.find(\".rt-tr-group\").length;\n        expect(currentHippaLogCount).to.be.equal(prevHippaLogCount[index] + 1);\n        var firstHippaLogRow = cy.get('.rt-body-hipaa-logs-list .rt-tr-group:first-child');\n        cy.wait(configFile.smallTimeout);\n        firstHippaLogRow.get('.hipaa-event-detail-button').first().should('contain', 'Change Priority').click();\n        cy.get('h3.reactTooltip-title').should('contain', 'Bulk Action');\n        var user = adminUser.split(\"@\")[0];\n        firstHippaLogRow.get(\".rt-body-hipaa-logs-list .rt-td.ellipsis\").eq(2).should('contain', \"\".concat(user, \", \").concat(user));\n        cy.get('.hipaa-log-title span:contains(\"×\")').first().click();\n    });\n});",
              "err": {},
              "uuid": "5a5d523c-db54-43ec-87d8-9bc965f5e362",
              "parentUUID": "c71aebb3-0b36-496d-85b5-0430742e43ac",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 8 cancel priority for several items",
              "fullTitle": "ECP-T3545-Change Reading Priority Step 8 cancel priority for several items",
              "timedOut": null,
              "duration": 18907,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "common_1.Common.login(customerName, adminUser, adminPassword);\ncommon_1.Common.navigateTo('Worklist');\nworklist_common_1.Worklist.filterByFacility(facilityName);\nvar prevState = [];\ncy.get('[role=\"rowgroup\"]').each(function ($el, index) {\n    cy.get('[data-cy=\"mappedPriorityCell\"]').eq(index).then(function ($span) {\n        prevState[index] = { priority: $span.text() };\n    });\n    cy.get('[data-cy=\"patientName-cell\"]').eq(index).rightclick();\n    cy.get('[data-cy=\"hipaaLog\"]', { timeout: configFile.hugeTimeout, }).click();\n    cy.get('.rt-body-hipaa-logs-list').then(function ($div) {\n        prevState[index] = __assign(__assign({}, prevState[index]), { hippaLogCount: $div.find(\".rt-tr-group\").length });\n        cy.get('.hipaa-log-title span:contains(\"×\")').first().click();\n    });\n});\n//Select serveral items, and change priority\ncy.get('[data-cy=\"selectionColumn\"] .nui-checkbox').eq(0).click();\nchangePriority();\n// Cancel the changes\ncy.get('button:contains(\"Cancel\")').click();\n//Cancel selection\ncy.get('[data-cy=\"selectionColumn\"] .nui-checkbox').eq(0).click();\n// Should stay with the prev priority and prev hippa log\ncy.get('[role=\"rowgroup\"]').each(function ($div, index) {\n    cy.get('[data-cy=\"mappedPriorityCell\"]').eq(index).should(function ($span) {\n        var currentPriority = $span.text();\n        expect(currentPriority).be.equal(prevState[index].priority);\n    });\n    cy.get('[data-cy=\"patientName-cell\"]').eq(index).rightclick();\n    cy.get('[data-cy=\"hipaaLog\"]', { timeout: configFile.hugeTimeout, }).click();\n    cy.get('.rt-body-hipaa-logs-list').then(function ($div) {\n        var currentCountHippaLogRows = $div.find(\".rt-tr-group\").length;\n        expect(currentCountHippaLogRows).to.be.equal(prevState[index].hippaLogCount);\n        cy.get('.hipaa-log-title span:contains(\"×\")').first().click();\n    });\n});",
              "err": {},
              "uuid": "6a9e8653-9c12-4b06-bf49-3a7898abe7d5",
              "parentUUID": "c71aebb3-0b36-496d-85b5-0430742e43ac",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 10 check the API of change priority",
              "fullTitle": "ECP-T3545-Change Reading Priority Step 10 check the API of change priority",
              "timedOut": null,
              "duration": 11927,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "common_1.Common.login(customerName, adminUser, adminPassword);\ncommon_1.Common.navigateTo('Worklist');\nworklist_common_1.Worklist.filterByFacility(facilityName);\ncy.getLocalStorage('Meteor.loginToken').then(function (Mtoken) {\n    cy.get('[data-cy=\"patientMrn-cell\"][title=\"a-01\"]').first().rightclick();\n    cy.get('[data-cy=\"hipaaLog\"]').click();\n    cy.get('button:contains(\"Worklist Added\")').first().click();\n    cy.get('.hipaa-event-details-basic-table').should('be.visible');\n    cy.get('.hipaa-event-details-basic-table').find('td').eq(1).invoke('text').then(function (text) {\n        var worklistEntityId = text;\n        var headers = {\n            Authorization: 'Bearer meteor:' + Mtoken,\n            Accept: 'application/json; charset=utf-8',\n            'Content-Type': 'application/json; charset=utf-8'\n        };\n        cy.request({\n            url: \"\".concat(configFile.url, \"/api/organizations/\").concat(orgId, \"/worklistEntities/\").concat(worklistEntityId, \"/changePriority\"),\n            failOnStatusCode: false,\n            headers: headers,\n            method: 'POST',\n            body: {\n                priority: 50\n            }\n        }).then(function (response) {\n            expect(response.status).to.be.equal(200);\n        });\n    });\n});",
              "err": {},
              "uuid": "1919c334-6b8f-464a-844a-c1c3331362a5",
              "parentUUID": "c71aebb3-0b36-496d-85b5-0430742e43ac",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Disable facility and cleanup",
              "fullTitle": "ECP-T3545-Change Reading Priority Disable facility and cleanup",
              "timedOut": null,
              "duration": 11536,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "common_1.Common.login(customerName, userName, userpassword);\nmeteor_1.Meteor.changeFacilityStatus(facilityName, false);",
              "err": {},
              "uuid": "ead2b2e4-da07-4dcb-897b-28f16136723d",
              "parentUUID": "c71aebb3-0b36-496d-85b5-0430742e43ac",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "5f281b61-9763-407e-9a3f-5da3101ed065",
            "be5d26a9-f74b-43f8-acaf-f767a1d6a441",
            "e296de0d-9111-4610-8323-16d99c401c30",
            "5a5d523c-db54-43ec-87d8-9bc965f5e362",
            "6a9e8653-9c12-4b06-bf49-3a7898abe7d5",
            "1919c334-6b8f-464a-844a-c1c3331362a5",
            "ead2b2e4-da07-4dcb-897b-28f16136723d"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 198147,
          "root": false,
          "rootEmpty": false,
          "_timeout": 2000
        }
      ],
      "passes": [],
      "failures": [],
      "pending": [],
      "skipped": [],
      "duration": 0,
      "root": true,
      "rootEmpty": true,
      "_timeout": 2000
    }
  ],
  "meta": {
    "mocha": {
      "version": "7.0.1"
    },
    "mochawesome": {
      "options": {
        "quiet": false,
        "reportFilename": "[name]",
        "saveHtml": true,
        "saveJson": true,
        "consoleReporter": "spec",
        "useInlineDiffs": false,
        "code": true
      },
      "version": "7.1.3"
    },
    "marge": {
      "options": {
        "id": "default",
        "charts": true,
        "html": true,
        "json": true,
        "reportDir": "cypress/report/mochawesome",
        "overwrite": true,
        "reportFilename": "[name]",
        "reportTitle": "SI PACS Automation",
        "reportPageTitle": "SI PACS Automation",
        "autoOpen": false
      },
      "version": "6.2.0"
    }
  }
}